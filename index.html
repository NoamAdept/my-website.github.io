<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Noam Yakar – Interactive Portfolio & Resume</title>

  <!-- Minimal Reset + Font -->
  <style>
    /* === Variables === */
    :root {
      --bg: #ffffff;
      --text: #333333;
      --accent: #007ACC;
      --header-bg: #ffffffdd;
      --card-bg: #f9f9f9;
    }
    html[data-theme="dark"] {
      --bg: #121212;
      --text: #eeeeee;
      --accent: #4FC3F7;
      --header-bg: #1a1a1add;
      --card-bg: #1e1e1e;
    }

    /* === Base Reset === */
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
    html { scroll-behavior:smooth; font-family:system-ui,sans-serif; }
    body { background:var(--bg); color:var(--text); line-height:1.5; }
    a { color:var(--accent); text-decoration:none; position:relative; }
    a::after {
      content:""; position:absolute; left:0; bottom:-2px;
      width:100%; height:2px; background:var(--accent);
      transform:scaleX(0); transform-origin:left;
      transition:transform .3s ease;
    }
    a:hover::after { transform:scaleX(1); }

    /* === Header & Nav === */
    header {
      position:sticky; top:0; z-index:100;
      background:var(--header-bg); backdrop-filter:blur(8px);
      display:flex; justify-content:space-between; align-items:center;
      padding:.75rem 1.5rem; box-shadow:0 1px 4px rgba(0,0,0,0.05);
    }
    nav ul { display:flex; gap:1.5rem; }
    nav a { padding:.25rem 0; font-weight:500; }
    nav a.active { border-bottom:2px solid var(--accent); }
    #theme-toggle, #download-resume {
      background:none; border:none; cursor:pointer;
      font-size:1rem; color:var(--text); margin-left:1rem;
      transition:color .3s;
    }
    #theme-toggle:hover, #download-resume:hover { color:var(--accent); }

    /* === Gamification Bar === */
    #gamification {
      display:flex; align-items:center; gap:.75rem; font-size:.9rem; margin-left:2rem;
    }
    #badges { display:flex; gap:.4rem; }
    .badge {
      font-size:1.2rem; opacity:0; transform:scale(.5);
      transition:opacity .4s ease, transform .4s ease;
    }
    .badge.unlocked {
      opacity:1; transform:scale(1);
    }

    /* === Sections === */
    main { max-width:800px; margin:2rem auto; padding:0 1rem; }
    section { padding:4rem 0; scroll-margin-top:4rem; }
    section h2 {
      font-size:1.75rem; margin-bottom:1rem;
      border-bottom:3px solid var(--accent);
      display:inline-block;
    }

    /* === Hero & Typed Effect === */
    #home { text-align:center; }
    #typed {
      margin-top:1rem; color:var(--accent);
      font-weight:500; min-height:1.5em;
    }

    /* === Skills Chart === */
    #skills { text-align:center; }
    #skills-chart { max-width:600px; margin:1rem auto; }

    /* === Timeline === */
    #timeline { position:relative; }
    #timeline::before {
      content:""; position:absolute; left:50%; top:0; bottom:0;
      width:2px; background:var(--accent);
    }
    .timeline-item {
      position:relative; width:50%; padding:1rem 2rem;
    }
    .timeline-item:nth-child(odd) { left:0; text-align:right; }
    .timeline-item:nth-child(even) { left:50%; text-align:left; }
    .timeline-item::before {
      content:""; position:absolute; top:1.25rem; width:12px; height:12px;
      border-radius:50%; background:var(--accent); border:2px solid var(--bg);
    }
    .timeline-item:nth-child(odd)::before { right:-8px; }
    .timeline-item:nth-child(even)::before { left:-8px; }
    .timeline-item h3 { margin-bottom:.25rem; font-size:1rem; }
    .timeline-item p  { font-size:.9rem; color:var(--text); }

    /* === Game Container === */
    #game { text-align:center; }
    #game-container {
      width:100%; height:600px; margin:1rem auto;
      border:2px solid var(--accent); border-radius:8px;
      background:var(--card-bg);
    }

    /* === Projects & Filter === */
    #project-filter {
      margin-bottom:1.5rem; padding:.5rem;
      border:1px solid var(--accent); border-radius:4px;
      background:var(--card-bg);
    }
    .projects-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:1.5rem;
    }
    .project-card {
      background:var(--card-bg);
      padding:1rem; border-radius:6px;
      box-shadow:0 2px 6px rgba(0,0,0,0.05);
      transition:transform .3s,box-shadow .3s;
    }
    .project-card:hover {
      transform:translateY(-5px);
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }

    /* === GitHub Activity === */
    #github img {
      width:100%; max-width:800px; border-radius:6px; margin-bottom:1rem;
    }
    #github-events { list-style:none; padding:0; }
    #github-events li {
      padding:.5rem 0; border-bottom:1px solid var(--card-bg);
    }

    /* === Back to Top === */
    #back-to-top {
      position:fixed; bottom:2rem; right:2rem;
      background:var(--accent); color:#fff;
      border:none; padding:.75rem; border-radius:50%;
      font-size:1.25rem; cursor:pointer;
      display:none; box-shadow:0 2px 6px rgba(0,0,0,0.2);
      transition:transform .3s;
    }
    #back-to-top:hover { transform:scale(1.1); }

    /* === Print Styles === */
    @media print {
      header, #back-to-top, #theme-toggle, #download-resume, #project-filter, #gamification { display:none; }
      body { background:#fff; color:#000; }
      section { padding:0; margin:0; }
      a::after { display:none; }
    }
  </style>

  <!-- Chart.js & Phaser 3 CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.min.js"></script>
</head>

<body>
  <header>
    <nav>
      <ul>
        <li><a href="#home" class="active">Home</a></li>
        <li><a href="#skills">Skills</a></li>
        <li><a href="#timeline">Timeline</a></li>
        <li><a href="#game">Game</a></li>
        <li><a href="#projects">Projects</a></li>
        <li><a href="#github">GitHub</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
    <div style="display:flex; align-items:center;">
      <button id="download-resume" title="Download Resume">📄</button>
      <button id="theme-toggle" title="Toggle Dark/Light">🌙</button>
      <div id="gamification">
        <span>XP: <strong id="xp-count">0</strong></span>
        <div id="badges"></div>
      </div>
    </div>
  </header>

  <main>
    <!-- HOME -->
    <section id="home">
      <h1>Noam Yakar</h1>
      <div id="typed"></div>
    </section>

    <!-- SKILLS -->
    <section id="skills">
      <h2>Skills</h2>
      <canvas id="skills-chart"></canvas>
    </section>

    <!-- TIMELINE -->
    <section id="timeline">
      <h2>Timeline</h2>
      <div class="timeline">
        <div class="timeline-item">
          <h3>Jun 2024–Aug 2024</h3>
          <p>Data Engineering Intern, Nike</p>
        </div>
        <div class="timeline-item">
          <h3>Aug 2023–May 2024</h3>
          <p>Statistical Modeling Analyst, ASU</p>
        </div>
        <div class="timeline-item">
          <h3>Jun 2023–Aug 2023</h3>
          <p>Cybersecurity Data Intern, Radware Inc.</p>
        </div>
        <div class="timeline-item">
          <h3>2021–2025</h3>
          <p>BSc CS & Math, ASU</p>
        </div>
      </div>
    </section>

    <!-- GAME -->
    <section id="game">
      <h2>Journey Game</h2>
      <div id="game-container"></div>
    </section>

    <!-- PROJECTS -->
    <section id="projects">
      <h2>Projects</h2>
      <select id="project-filter">
        <option value="all">All</option>
        <option value="security">Security</option>
        <option value="data">Data</option>
        <option value="web">Web</option>
      </select>
      <div class="projects-grid">
        <div class="project-card" data-category="security">
          <h3>WarGames Gradebook</h3>
          <p>CTF-style Python tool for teaching secure coding.</p>
        </div>
        <div class="project-card" data-category="data">
          <h3>ARIMA Forecasting</h3>
          <p>Time-series predictions with Python & R.</p>
        </div>
        <div class="project-card" data-category="web">
          <h3>SneakyPixel</h3>
          <p>Flask app to hide/extract encrypted messages in images.</p>
        </div>
        <div class="project-card" data-category="security">
          <h3>Pwn College CTF</h3>
          <p>Top-10 finisher in program & system security track.</p>
        </div>
      </div>
    </section>

    <!-- GITHUB ACTIVITY -->
    <section id="github">
      <h2>GitHub Activity</h2>
      <img src="https://ghchart.rshah.org/NoamAdept" alt="GitHub Contribution Graph" />
      <ul id="github-events"><li>Loading activity…</li></ul>
    </section>

    <!-- CONTACT -->
    <section id="contact">
      <h2>Contact Me</h2>
      <form action="https://formspree.io/f/yourformid" method="POST">
        <label>
          <span>Name</span><br/>
          <input type="text" name="name" required style="width:100%;padding:.5rem;margin:.5rem 0;border:1px solid var(--accent);border-radius:4px;">
        </label><br/>
        <label>
          <span>Email</span><br/>
          <input type="email" name="_replyto" required style="width:100%;padding:.5rem;margin:.5rem 0;border:1px solid var(--accent);border-radius:4px;">
        </label><br/>
        <label>
          <span>Message</span><br/>
          <textarea name="message" rows="4" required style="width:100%;padding:.5rem;margin:.5rem 0;border:1px solid var(--accent);border-radius:4px;"></textarea>
        </label><br/>
        <button type="submit" style="padding:.75rem 1.5rem;border:none;background:var(--accent);color:#fff;border-radius:4px;cursor:pointer;">
          Send
        </button>
      </form>
    </section>
  </main>

  <button id="back-to-top" title="Back to top">↑</button>

  <script>
    // Theme toggle
    const themeBtn = document.getElementById('theme-toggle');
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    themeBtn.textContent = savedTheme === 'light' ? '🌙' : '☀️';
    themeBtn.onclick = () => {
      const next = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      themeBtn.textContent = next === 'light' ? '🌙' : '☀️';
    };

    // Typed intro
    const introText = 'Summa Cum Laude CS & Math Graduate • Builder of Data Tools & Secure Apps';
    let idx = 0, typedEl = document.getElementById('typed');
    function type() {
      if (idx < introText.length) {
        typedEl.textContent += introText[idx++];
        setTimeout(type, 80);
      }
    }
    document.addEventListener('DOMContentLoaded', type);

    // Active nav on scroll
    document.querySelectorAll('main section').forEach(sec => {
      new IntersectionObserver(entries => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
            const a = document.querySelector(`nav a[href="#${e.target.id}"]`);
            a && a.classList.add('active');
          }
        });
      }, { threshold: 0.3 }).observe(sec);
    });

    // Back to Top
    const backBtn = document.getElementById('back-to-top');
    window.addEventListener('scroll', () => backBtn.style.display = window.scrollY > 300 ? 'block' : 'none');
    backBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });

    // Download Resume
    document.getElementById('download-resume').onclick = () => {
      const link = document.createElement('a');
      link.href = 'resume.pdf';
      link.download = 'Noam_Yakar_Resume.pdf';
      link.click();
    };

    // Project Filter
    document.getElementById('project-filter').onchange = e => {
      document.querySelectorAll('.project-card').forEach(card => {
        card.style.display = (e.target.value === 'all' || card.dataset.category === e.target.value) ? 'block' : 'none';
      });
    };

    // GitHub activity
    fetch('https://api.github.com/users/NoamAdept/events/public')
      .then(r => r.json()).then(events => {
        const list = document.getElementById('github-events');
        list.innerHTML = '';
        events.slice(0,5).forEach(evt => {
          const li = document.createElement('li');
          const date = new Date(evt.created_at).toLocaleDateString();
          let desc = '';
          switch(evt.type) {
            case 'PushEvent': desc = `Pushed to ${evt.repo.name}`; break;
            case 'CreateEvent': desc = `Created ${evt.payload.ref_type} ${evt.payload.ref||''}`.trim(); break;
            case 'IssuesEvent': desc = `${evt.payload.action} issue #${evt.payload.issue.number}`; break;
            default: desc = `${evt.type} on ${evt.repo.name}`;
          }
          li.textContent = `${date}: ${desc}`;
          list.appendChild(li);
        });
      })
      .catch(_ => document.getElementById('github-events').innerHTML = '<li>Couldn’t load GitHub activity.</li>');

    // Skills Chart (Chart.js)
    document.addEventListener('DOMContentLoaded', () => {
      new Chart(document.getElementById('skills-chart'), {
        type: 'radar',
        data: {
          labels: ['Python','C++','SQL','AWS','Security'],
          datasets: [{
            label: 'Proficiency',
            data: [90,75,85,70,80],
            backgroundColor: 'rgba(0,122,204,0.2)',
            borderColor: getComputedStyle(document.documentElement).getPropertyValue('--accent').trim()
          }]
        },
        options: { scales:{ r:{ beginAtZero:true, max:100 }}, plugins:{ legend:{ display:false } } }
      });
    });

    // Gamification
    (function(){
      const sections = [
        { id:'home', xp:10, emoji:'🏠', name:'Explorer' },
        { id:'skills', xp:15, emoji:'🔧', name:'Skilled' },
        { id:'timeline', xp:15, emoji:'🗓️', name:'Historian' },
        { id:'game', xp:25, emoji:'🎮', name:'Gamer' },
        { id:'projects', xp:20, emoji:'🚀', name:'Builder' },
        { id:'github', xp:15, emoji:'🐙', name:'Contributor' },
        { id:'contact', xp:10, emoji:'📬', name:'Connector' }
      ];
      const xpEl = document.getElementById('xp-count'), badgesEl = document.getElementById('badges');
      let unlocked = JSON.parse(localStorage.getItem('unlockedSections')||'[]');
      let xp = unlocked.reduce((sum,id)=>{
        const s=sections.find(s=>s.id===id);
        return sum + (s?s.xp:0);
      },0);
      xpEl.textContent = xp;
      unlocked.forEach(id=>{
        const s=sections.find(s=>s.id===id);
        s && addBadge(s,false);
      });
      const obs = new IntersectionObserver(entries=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            const sec=sections.find(s=>s.id===e.target.id);
            if(sec && !unlocked.includes(sec.id)){
              unlocked.push(sec.id);
              localStorage.setItem('unlockedSections',JSON.stringify(unlocked));
              xp += sec.xp; xpEl.textContent = xp;
              addBadge(sec,true);
            }
          }
        });
      },{ threshold:0.6 });
      sections.forEach(s=>{
        const el=document.getElementById(s.id);
        el && obs.observe(el);
      });
      function addBadge({emoji,name},animate){
        const b=document.createElement('span');
        b.className='badge'; b.title=name; b.textContent=emoji;
        badgesEl.appendChild(b);
        if(animate) requestAnimationFrame(()=>b.classList.add('unlocked'));
        else b.classList.add('unlocked');
      }
    })();

    // Phaser Game
    window.addEventListener('load', () => {
      const config = {
        type: Phaser.AUTO,
        width: 800, height: 600,
        parent: 'game-container',
        physics: { default: 'arcade' },
        scene: { preload, create, update }
      };
      new Phaser.Game(config);

      function preload() {
        // no assets needed
      }

      function create() {
        // player
        this.player = this.add.rectangle(400, 550, 40, 40, 0x00ff00);
        this.physics.add.existing(this.player);
        this.player.body.setCollideWorldBounds(true);

        // controls
        this.cursors = this.input.keyboard.createCursorKeys();

        // lanes
        const lanes = [
          { y: 450, speed: 100, label: 'Cybersecurity Intern' },
          { y: 350, speed: -120, label: 'Stats Analyst' },
          { y: 250, speed: 140, label: 'Data Intern' },
          { y: 150, speed: -160, label: 'ASU Graduate' }
        ];
        this.obstacles = this.physics.add.group({ allowGravity: false, immovable: true });

        lanes.forEach(lane => {
          this.add.text(10, lane.y - 20, lane.label, { fontSize: '16px', fill: '#000' });
          for (let i = 0; i < 5; i++) {
            const x = Phaser.Math.Between(0, 800);
            const rect = this.add.rectangle(x, lane.y, 80, 40, 0xff0000);
            this.physics.add.existing(rect);
            rect.body.setVelocityX(lane.speed);
            rect.body.setImmovable(true);
            this.obstacles.add(rect);
          }
        });

        this.physics.add.collider(this.player, this.obstacles, () => this.resetPlayer(), null, this);
      }

      function update() {
        const p = this.player.body;
        p.setVelocity(0);
        if (this.cursors.left.isDown) p.setVelocityX(-200);
        else if (this.cursors.right.isDown) p.setVelocityX(200);
        if (this.cursors.up.isDown) p.setVelocityY(-200);
        else if (this.cursors.down.isDown) p.setVelocityY(200);

        this.obstacles.children.iterate(obs => {
          if (obs.x > 840 && obs.body.velocity.x > 0) obs.x = -40;
          else if (obs.x < -40 && obs.body.velocity.x < 0) obs.x = 840;
        });

        if (this.player.y < 100) {
          this.scene.pause();
          alert('🎓 Congratulations! You crossed your journey!');
          this.resetPlayer();
          this.scene.resume();
        }
      }

      function resetPlayer() {
        this.player.x = 400;
        this.player.y = 550;
      }
    });
  </script>
</body>
</html>
